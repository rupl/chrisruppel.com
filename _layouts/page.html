{% capture title %}
{% if page.title %}{{ page.title }}{% endif %}
{% if page.location %} {% include location.html location=page.location %}{% endif %}
{% if page.category == 'travel' %} üåç {% endif %}
{% if page.tag %}#{{ page.tag | replace: ' ','' | downcase }} {% endif %}
{% if page.category == 'blog' %} ‚Äî {% endif %}
{% endcapture %}
<!DOCTYPE html>
<html class="no-js wf-loading" lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>{{ title | strip_newlines }} {{ site.name }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#ffffff">
    <meta name="description" content="Personal website of Chris Ruppel, frontend developer.">
    <link rel="home" href="{{ site.url }}">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="192x192" href="/static/chris-ruppel-2015-noborder@192x192.png">

    <!-- indieweb sign-in -->
    <link rel="me" href="{{ site.url }}">
    <link rel="me" href="https://rupl.github.io">
    <link rel="me" href="https://github.com/rupl">
    <link rel="me" href="https://keybase.io/rupl">
    <link rel="me" href="https://twitter.com/rupl">
    <link rel="me" href="https://coil.com/u/rupl">

    <!-- webmention endpoint -->
    <link rel="webmention" href="{{ site.url }}/webmentions/post/" />

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="Chris' Travels" href="{{ site.url }}/travel.xml">
    <link rel="alternate" type="application/rss+xml" title="Chris' Blog" href="{{ site.url }}/blog.xml">

    <!-- Web Monetization -->
    <meta name="monetization" content="$coil.xrptipbot.com/yvngUXLET_qeGak1vhLgGQ">

    <!-- Preload CSS -->
    {% comment %}<link rel="preload" href="/css/main.min.css" as="style" onload="this.rel='stylesheet'">{% endcomment %}
    <link rel="preload" href="/css/fonts.min.css" as="style" onload="this.rel='stylesheet'">

    <!-- Performance-related tags -->
    <link rel="preconnect" href="{{ site.matomo.url }}">
  {% if site.img-host != '' %}
    <link rel="preconnect" href="{{ site.img-host }}">
  {% endif %}

  {% if page.meta != null %}
    <!-- Social tags -->
    <meta name="twitter:dnt" content="on">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@rupl">
    <meta name="twitter:creator" content="@rupl">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ site.url }}{{ page.url }}">
    <meta property="og:title" content="{{ page.title | escape | strip_newlines }}{% if page.location %} {% include location.html location=page.location %}{% endif %}">
    <meta property="og:description" content="{% if page.summary %}{{ page.summary | strip_html | escape }}{% else %}{{ page.content | truncatewords: 50, '...' | strip_html | escape }}{% endif %}">
    <meta property="og:image" content="{{ site.img-host }}/img/travel/{% if page.gallery[0].src %}{{ page.gallery[0].src }}{% else %}{{ page.gallery[1].src }}{% endif %}">
  {% endif %}

  {% if site.development == false %}
    <style type="text/css">{% include main.min.css %}</style>
  {% else %}
    <!-- load using <link> on local so I can inject new styles -->
    <link rel="stylesheet" href="/css/main.min.css" type="text/css">
  {% endif %}

    <script>
      // JS is able to start executing.
      document.documentElement.classList.remove('no-js');
      document.documentElement.classList.add('js');

      {% include _head.js %}

      (function iife() {
        'use strict';

        // Optimization for Repeat Views
        if (sessionStorage.fontsLoadedFoutWithClassPolyfill) {
          document.documentElement.classList.remove('wf-loading');
          document.documentElement.classList.add('wf-oswald');
          return;
        }

        {% include _ffo.js %}

        // Load and observe fonts
        var oswaldLight = new FontFaceObserver('Oswald', {weight: 300});
        var oswaldRegular = new FontFaceObserver('Oswald', {weight: 400});

        Promise.all([oswaldLight.load(), oswaldRegular.load()]).then(function() {
          document.documentElement.classList.remove('wf-loading');
          document.documentElement.classList.add('wf-oswald');

          // Optimization for Repeat Views
          sessionStorage.fontsLoadedFoutWithClassPolyfill = true;
        });
      })();
    </script>

    {% if site.matomo.id != '' %}
      <script type="text/javascript">
        var _paq = _paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(["setDoNotTrack", true]);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
          var u="{{ site.matomo.url }}/";
          _paq.push(['setTrackerUrl', u+'piwik.php']);
          _paq.push(['setSiteId', '{{ site.matomo.id }}']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
      </script>
      <noscript><img src="{{ site.matomo.url }}/piwik.php?idsite={{ site.matomo.id }}&rec=1" style="border: 0;" alt="" /></noscript>
    {% endif %}
  </head>
  <body class="{{ page.bodyclass }}">
    <main>
      {{ content }}
    </main>
    <footer role="contentinfo" class="h-card vcard">
      <section>
        <img alt="my face" class="me u-photo"
          width="120" height="120"
          src="/static/chris-ruppel-2015@384x384.jpg"
          srcset="/static/chris-ruppel-2015@512x512.jpg 2x">

        <p class="p-role p-note">
          Hello, I'm <a class="p-name fn u-url" href="{{ site.url }}">Chris Ruppel</a>,
          a frontend <span class="p-category">developer</span>, digital <span class="p-category">artist</span>, and world <span class="p-category">traveler</span>
          last seen {% include last-seen.html %}. <a href="{{ site.url }}/work/">Hire me!</a><br>
        </p>
        <p class="colophon">
          <a href="{{ site.license-url }}">&#169; {{'now' | date: '%Y'}} Chris Ruppel</a> ‚Äî
          <a href="{{ site.feedback-url }}">Got feedback?</a>
        </p>
      </section>
    </footer>

    <div id="status" role="alert" aria-live="assertive">
      <p id="message"></p>
      <button class="dismiss"><span class="element-invisible">Close this message</span></button>
    </div>

    <script async defer src="/js/main.min.js"></script>
    {% if page.photosphere %}<script async defer src="/js/photosphere.min.js"></script>{% endif %}
    {% if page.js %}<script async defer src="/js/{{ page.js }}"></script>{% endif %}
  </body>
</html>
