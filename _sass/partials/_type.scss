//
// Global typography stuff
//
// See the page.html layout for the font import.
//

p {
  line-height: 1.4;
}

abbr[title] {
  border-bottom: 1px dotted;
  cursor: help;
  position: relative;
  margin-right: .5em;
  text-decoration: none;

  &:after {
    content: '(?)';
    vertical-align: top;
    vertical-align: super;
    line-height: 0;
    font-family: serif;
    font-size: 0.5em;
    font-weight: 700;
    letter-spacing: 0;
    position: absolute;
    top: .5em;
    right: -1.25em;
  }
}

abbr[lang] {
  font-style: italic;
}

// This class is on the main content area of any page
main {
  font-weight: 200;
  letter-spacing: -.333px;

  h1, h2, h3 {
    @include font-oswald;
  }

  h4 {
    font-weight: 200;
    font-style: italic;
    border-radius: 1em / 4em;
    border-left: 1.5em solid rgba(#f82, .8);
    padding-left: .5em;
  }

  // Spruce up the lists a bit.
  ul, ol {
    li {
      font-size: 95%;
      margin-right: 5%;
      margin-bottom: 1.5%;
    }
  }

  // style updates
  .update {
    font-size: .9em;
    font-style: italic;
    color: #444;
    text-decoration: none;

    &::before {
      content: "Update " attr(datetime) ": ";
      font-weight: 700;
    }
  }

  // Subdue stricken text
  del {
    display: inline-block;
    text-decoration: none;
    opacity: .5;
    transition: opacity .2s ease-in-out;
    position: relative;

    &::after {
      content: ' ';
      position: absolute;
      bottom: .55em;
      left: 0;
      right: 0;
      border-bottom: 1px solid #000;
      transition: transform .2s ease-in-out;
    }

    // Highlight inserted text
    + .oops {
      display: inline-block;
      opacity: .8;

      // positioning
      margin-right: -.2em; // compensate for the nudging we're about to do.
      transition: .2s ease-in-out;
      transition-property: color, opacity, transform;
      perspective: 600px;
      transform-style: preserve-3d;
      transform: translateX(-.2em) translateY(-.06em) rotateZ(-4deg);

      // typography (no effect on positioning)
      text-decoration: none;
      color: #111;
    }

    // &:hover {
    //   opacity: 1;

    //   &::after {
    //     transform: translateY(.4em);
    //   }

    //   + .oops {
    //     color: #000;
    //     transform: translateX(-.1em) translateY(-.06em) rotateZ(-6deg) scale(1.08);
    //   }
    // }
  }

  code {
    display: inline-block;
    font-weight: 400;
    padding: 0 .2em;
    border-radius: .2em;
    background: #ddd;
  }

  aside.note {
    font-size: .8em;
    margin: 0 1em;
    font-style: italic;
    opacity: .9;

    @media(min-width: 1147px) {
      margin: 0 3em;
    }
  }

  aside.warning {
    font-style: italic;
    font-weight: 200;
    padding: .2em 5%;
    background-color: rgba(#fd0, .4);
    border-radius: 7px;

    @media (min-width: 1147px) {
      width: 110%;
      margin-left: -5%; // match L/R padding above
    }

    > p::before {
      content: 'âš  ';
    }
  }
}
