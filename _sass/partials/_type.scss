//
// Global typography stuff
//

p {
  line-height: 1.4;
}

strong {
  font-weight: 700;
}

em {
  font-style: italic;
}

//
// Fluid images by default
//
img {
  max-width: 100%;
  height: auto;
}

//
// Superscript shouldn't disrupt line-height
//
sup {
  vertical-align: top;
}

// Acronymns and abbreviations should indicate that the expanded meaning can be
// seen by displaying a (?) which will reveal title text on mouseover.
abbr[title] {
  border-bottom: 1px dotted;
  cursor: help;
  margin-right: .5em;
  text-decoration: none;
  position: relative;

  &:after {
    content: '(?)';
    vertical-align: top;
    line-height: 0;
    font-family: serif;
    font-size: 0.5em;
    font-weight: 700;
    letter-spacing: 0;

    position: absolute;
    top: .5em;
    right: -1.25em;
  }
}

// italicize any foreign-language abbreviations
abbr[lang] {
  font-style: italic;
}

// Style blockquotes
blockquote {
  font-style: italic;
  opacity: .8;
  padding: .1em 1em;
  margin: 0 .5em;
  background: rgba(#000, .1);

  @media (min-width: 600px) {
    margin: 0 1em 0 2em;
  }
}

// Main content area. We want some defaults but not applied to header or footer.
main {
  font-weight: 300;
  // letter-spacing: -.5px;

  h1, h2, h3 {
    @include font-oswald;
  }

  h4 {
    font-weight: 200;
    font-style: italic;
    border-radius: 1em / 4em;
    border-left: 1.5em solid rgba(#f82, .8);
    padding-left: .5em;
  }

  // Spruce up the lists a bit.
  ul, ol {
    li {
      line-height: 1.2;
      font-size: 95%;
      margin-right: 5%;
      margin-bottom: 1.5%;
    }
  }

  // Updates/corrections to content
  ins.update {
    font-size: .9em;
    font-style: italic;
    color: #444;
    text-decoration: none;

    &::before {
      content: "Update " attr(datetime) ": ";
      font-weight: 700;
    }
  }

  // Subdue stricken text
  del {
    display: inline-block;
    text-decoration: none;
    opacity: .5;
    transition: opacity .2s ease-in-out;
    position: relative;

    &::after {
      content: ' ';
      position: absolute;
      bottom: .55em;
      left: 0;
      right: 0;
      border-bottom: 1px solid #000;
      transition: transform .2s ease-in-out;
    }
  }

  // Highlight inserted text after deletions
  del + .oops {
    display: inline-block;
    opacity: .8;

    // positioning
    margin-right: -.2em; // compensate for the nudging we're about to do.
    transition: .2s ease-in-out;
    transition-property: color, opacity, transform;
    perspective: 600px;
    transform-style: preserve-3d;
    transform: translateX(-.2em) translateY(-.06em) rotateZ(-4deg);

    // typography (no effect on positioning)
    text-decoration: none;
    color: #111;
  }

  // Default styles for code blocks. The syntax highlighter will override most
  // of this once it executes.
  code {
    display: inline-block;
    font-weight: 400;
    padding: 0 .2em;
    border-radius: .2em;
    background: #ddd;
  }

  aside.note {
    font-size: .8em;
    margin: 0 1em;
    font-style: italic;
    opacity: .9;

    @media (min-width: 1147px) {
      margin: 0 3em;
    }
  }

  aside.warning {
    font-style: italic;
    font-weight: 200;
    padding: .2em 5%;
    background-color: rgba(#fd0, .4);
    border-radius: 7px;

    @media (min-width: 1147px) {
      width: 110%;
      margin-left: -5%; // match L/R padding above
    }

    > p::before {
      content: 'âš  ';
    }
  }
}
